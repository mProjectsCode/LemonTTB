(function(t){function e(e){for(var r,o,c=e[0],i=e[1],u=e[2],l=0,d=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);b&&b(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},a={app:0},s=[];function o(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"935ac03b"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,r){n=a[t]=[e,r]}));e.push(n[2]=r);var s,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=o(t);var u=new Error;s=function(e){i.onerror=i.onload=null,clearTimeout(l);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",u.name="ChunkLoadError",u.type=r,u.request=s,n[1](u)}a[t]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:i})}),12e4);i.onerror=i.onload=s,document.head.appendChild(i)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var b=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"6dce":function(t,e,n){},"8acd":function(t,e,n){"use strict";n("6dce")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={id:"app"},s={id:"main"},o=Object(r["i"])('<div class="p-5 bg-primary text-white text-center"><h1>LemonTTB</h1><p>LemonTTB is a Discord Bot designed to assist the GM during tabletop sessions, that use Discord for communication.</p></div><nav class="navbar navbar-expand-sm bg-dark navbar-dark"><div class="container-fluid"><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="https://github.com/mProjectsCode/LemonTTB">GitHub</a></li><li class="nav-item"><a class="nav-link" href="#">About LemonTTB</a></li></ul></div></nav>',2),c=Object(r["h"])("footer",{class:"mt-5 p-4 bg-dark text-white text-center",style:{"z-index":"11"}},[Object(r["h"])("p",null,"LemonTTB - GPL-3.0 License")],-1);function i(t,e,n,i,u,l){var b=Object(r["D"])("router-view");return Object(r["w"])(),Object(r["g"])("div",a,[Object(r["h"])("div",s,[o,Object(r["k"])(b),c])])}var u=n("1da1"),l=n("bee2"),b=n("d4ec"),d=n("262e"),p=n("2caf"),O=(n("96cf"),n("d3b7"),n("159b"),n("b0c0"),n("9ab4")),h=n("ce1f"),f=function(t){Object(d["a"])(n,t);var e=Object(p["a"])(n);function n(){return Object(b["a"])(this,n),e.apply(this,arguments)}return Object(l["a"])(n)}(h["b"]);f=Object(O["a"])([Object(h["a"])({data:function(){return{source:null}},mounted:function(){this.subscribeToEvents()},computed:{botStatus:function(){return this.$store.getters.getBotStatus}},methods:{getAllEvents:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/events/getAll");case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,r.forEach((function(e){t.emitter.emit("api-event",e)}));case 7:case"end":return e.stop()}}),e)})))()},subscribeToEvents:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/events/unsubscribe");case 2:return e.next=4,t.getAllEvents();case 4:t.source=new EventSource("/api/events/subscribe"),t.source.onmessage=t.onEventMessage;case 6:case"end":return e.stop()}}),e)})))()},onEventMessage:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=JSON.parse(t.data),console.log(r),e.emitter.emit("api-event",r),e.toast.success(r.name+" status "+r.payload.response,{timeout:1e4});case 4:case"end":return n.stop()}}),n)})))()}}})],f);var v=f,m=(n("8acd"),n("6b0d")),j=n.n(m);const g=j()(v,[["render",i]]);var S=g,y=(n("3ca3"),n("ddb0"),n("6c02")),w={class:"container mt-5"};function B(t,e,n,a,s,o){var c=Object(r["D"])("BotStatus");return Object(r["w"])(),Object(r["g"])("div",w,[Object(r["k"])(c)])}var x={class:"card shadow"},k={class:"card-header"},P={style:{display:"flex","align-items":"center",gap:"10px"}},T=Object(r["h"])("span",null," Bot Status ",-1),E={style:{flex:"1"}},A=Object(r["h"])("span",{class:"material-icons",style:{"vertical-align":"middle"}},"refresh",-1),R=[A],U=Object(r["h"])("h6",{class:""}," Information if the bot is online and buttons to start and stop it. ",-1),C={class:"card-body"},M=Object(r["h"])("h4",null,"Actions",-1),N=Object(r["h"])("h4",null,"Component Status",-1),G={class:"container"},I={class:"row"},_={class:"col-auto"},L=Object(r["h"])("div",{class:"col"}," Audio Player ",-1),J={class:"row"},D={class:"col-auto"},$=Object(r["h"])("div",{class:"col"}," User Manager ",-1),V={class:"row"},Q={class:"col-auto"},q=Object(r["h"])("div",{class:"col"}," Permission Manager ",-1),z={class:"row"},F={class:"col-auto"},H=Object(r["h"])("div",{class:"col"}," Name Mappings ",-1),K={class:"row"},Y={class:"col-auto"},W=Object(r["h"])("div",{class:"col"}," JDA ",-1),X={class:"row"},Z={class:"col-auto"},tt=Object(r["h"])("div",{class:"col"}," Config Validated ",-1),et=Object(r["h"])("br",null,null,-1),nt=Object(r["h"])("h6",null,"Bot start up errors:",-1),rt={class:"text-danger"};function at(t,e,n,a,s,o){return Object(r["w"])(),Object(r["g"])("div",x,[Object(r["h"])("div",k,[Object(r["h"])("h2",P,[T,Object(r["h"])("span",E,[Object(r["h"])("span",{class:Object(r["r"])(["badge",[t.botStatusBadgeClass]])},Object(r["G"])(t.botStatusBadgeContent),3)]),Object(r["h"])("button",{class:"btn btn-secondary",type:"button",onClick:e[0]||(e[0]=function(e){return t.getBotStatus(!0)})},R)]),U]),Object(r["h"])("div",C,[M,Object(r["h"])("p",null,[Object(r["h"])("button",{class:Object(r["r"])(["btn",["online"===t.botStatus?"btn-secondary":"btn-primary"]]),onClick:e[1]||(e[1]=function(e){return t.startBot()})},Object(r["G"])("online"===t.botStatus?"Restart Bot":"Start Bot"),3)]),Object(r["h"])("p",null,[Object(r["h"])("button",{class:"btn btn-danger",onClick:e[2]||(e[2]=function(e){return t.stopBot()})},"Stop Bot")]),N,Object(r["h"])("div",G,[Object(r["h"])("div",I,[Object(r["h"])("div",_,[Object(r["h"])("span",{class:Object(r["r"])(["material-icons",[t.botAudioPlayerOnline?"text-success":"text-danger"]]),style:{"vertical-align":"middle"}},Object(r["G"])(t.botAudioPlayerOnline?"check":"clear"),3)]),L]),Object(r["h"])("div",J,[Object(r["h"])("div",D,[Object(r["h"])("span",{class:Object(r["r"])(["material-icons",[t.botUserOnline?"text-success":"text-danger"]]),style:{"vertical-align":"middle"}},Object(r["G"])(t.botUserOnline?"check":"clear"),3)]),$]),Object(r["h"])("div",V,[Object(r["h"])("div",Q,[Object(r["h"])("span",{class:Object(r["r"])(["material-icons",[t.botPermissionsOnline?"text-success":"text-danger"]]),style:{"vertical-align":"middle"}},Object(r["G"])(t.botPermissionsOnline?"check":"clear"),3)]),q]),Object(r["h"])("div",z,[Object(r["h"])("div",F,[Object(r["h"])("span",{class:Object(r["r"])(["material-icons",[t.botNameMappingsOnline?"text-success":"text-danger"]]),style:{"vertical-align":"middle"}},Object(r["G"])(t.botNameMappingsOnline?"check":"clear"),3)]),H]),Object(r["h"])("div",K,[Object(r["h"])("div",Y,[Object(r["h"])("span",{class:Object(r["r"])(["material-icons",[t.botJdaOnline?"text-success":"text-danger"]]),style:{"vertical-align":"middle"}},Object(r["G"])(t.botJdaOnline?"check":"clear"),3)]),W]),Object(r["h"])("div",X,[Object(r["h"])("div",Z,[Object(r["h"])("span",{class:Object(r["r"])(["material-icons",[t.botConfigValidationOnline?"text-success":"text-danger"]]),style:{"vertical-align":"middle"}},Object(r["G"])(t.botConfigValidationOnline?"check":"clear"),3)]),tt])]),Object(r["N"])(Object(r["h"])("div",null,[et,nt,Object(r["h"])("p",rt,Object(r["G"])(t.botStartUpError),1)],512),[[r["K"],null!=t.botStartUpError]])])])}n("fb6a");var st=function(t){Object(d["a"])(n,t);var e=Object(p["a"])(n);function n(){return Object(b["a"])(this,n),e.apply(this,arguments)}return Object(l["a"])(n)}(h["b"]);st=Object(O["a"])([Object(h["a"])({name:"BotStatus",props:{},data:function(){return{onlineQueryInterval:null,botStartUpError:null,botAudioPlayerOnline:!1,botUserOnline:!1,botPermissionsOnline:!1,botNameMappingsOnline:!1,botJdaOnline:!1,botConfigValidationOnline:!1}},computed:{botStatus:function(){return this.$store.getters.getBotStatus},botStatusBadgeClass:function(){var t=this.$store.getters.getBotStatus;switch(t){case"online":return"bg-success";case"starting":return"bg-warning";default:return"bg-danger"}},botStatusBadgeContent:function(){var t=this.$store.getters.getBotStatus;return this.botStartUpError?"Error":t.charAt(0).toUpperCase()+t.slice(1)}},mounted:function(){var t=this;this.getBotStatus(!1),this.onlineQueryInterval=setInterval((function(){t.getBotStatus(!1)}),5e3),this.emitter.on("api-event",(function(e){if(console.log("received api event in BotStatus.vue"),"START_UP_EVENT"==e.eventType)switch(e.name){case"AUDIO_PLAYER":t.botAudioPlayerOnline=!0;break;case"USERS":t.botUserOnline=!0;break;case"PERMISSIONS":t.botPermissionsOnline=!0;break;case"NAME_MAPPINGS":t.botNameMappingsOnline=!0;break;case"JDA":t.botJdaOnline=!0;break;case"CONFIG_VALIDATION":t.botConfigValidationOnline=!0;break}else"BOT_STATUS"==e.eventType?"STOP"==e.name?t.$store.commit("setBotStatus","offline"):"STARTING"==e.name?(t.$store.commit("setBotStatus","starting"),t.botStartUpError=null,t.botAudioPlayerOnline=!1,t.botUserOnline=!1,t.botPermissionsOnline=!1,t.botNameMappingsOnline=!1,t.botJdaOnline=!1,t.botConfigValidationOnline=!1):"ONLINE"==e.name&&t.$store.commit("setBotStatus","online"):"BOT_ERROR"==e.eventType&&(t.botStartUpError=e.payload.data)}))},methods:{getBotStatus:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:fetch("/api/startUp/botOnline").then(function(){var n=Object(u["a"])(regeneratorRuntime.mark((function n(r){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.json();case 2:a=n.sent,console.log(a),a?(e.$store.commit("setBotStatus","online"),t&&e.toast.success("Bot is online",{timeout:3e3})):(e.$store.commit("setBotStatus","offline"),t&&e.toast.error("Bot is offline",{timeout:3e3}));case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})))()},startBot:function(){return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/startUp/startBot");case 2:case"end":return t.stop()}}),t)})))()},stopBot:function(){return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/startUp/stopBot");case 2:case"end":return t.stop()}}),t)})))()}}})],st);var ot=st;const ct=j()(ot,[["render",at]]);var it=ct,ut=function(t){Object(d["a"])(n,t);var e=Object(p["a"])(n);function n(){return Object(b["a"])(this,n),e.apply(this,arguments)}return Object(l["a"])(n)}(h["b"]);ut=Object(O["a"])([Object(h["a"])({components:{BotStatus:it}})],ut);var lt=ut;const bt=j()(lt,[["render",B]]);var dt=bt,pt=[{path:"/",name:"Dashboard",component:dt},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Ot=Object(y["a"])({history:Object(y["b"])("/"),routes:pt}),ht=Ot,ft=n("5502"),vt=Object(ft["a"])({state:{botStatus:"offline",eventSource:null},getters:{getBotStatus:function(t){return t.botStatus}},actions:{},mutations:{setBotStatus:function(t,e){t.botStatus=e}}}),mt=n("0180"),jt=(n("da96"),n("f9e3"),n("1344")),gt={},St=Object(jt["a"])(),yt=Object(r["d"])(S);yt.use(vt),yt.use(ht),yt.use(mt["a"],gt),yt.config.globalProperties.emitter=St,yt.mixin({data:function(){return{toast:null}},mounted:function(){this.toast=Object(mt["b"])()},methods:{}}),yt.mount("#app")}});
//# sourceMappingURL=app.0a124c38.js.map